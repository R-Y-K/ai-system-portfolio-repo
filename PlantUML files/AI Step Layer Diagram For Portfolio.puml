@startuml AI Step Layer Diagram For Portfolio
title AI Step/Action Layer Diagram
top to bottom direction
package "AI" #DDDDDD
{ 
  package "Step/Action Layer" #DDDDDD
  {
    class StepBehaviourControllerSO<<ScriptableObject>>
    class ActionState<<ScriptableObject>>
    StepBehaviourControllerSO -[hidden]-> ActionState

    note bottom of ActionState
    Action state is where we
    implement the logic for
    actions and run them with
    StepBehaviourController
    end note

    note top of StepBehaviourControllerSO
    StepBehaviourControllerSO is responsible
    for running action/step states that are the
    concrete actions that the AI takes
    in order to reach the "goal" of the
    goal behaviours.
    end note

    note left of StepBehaviourControllerSO
    StepBehaviourController does not
    inherit steps/actions, that it uses.
    It runs them in parallel, in order
    to execute an action towards a goal.
    end note

    note right of StepBehaviourControllerSO
    Through running multiple actions at the
    same time the AI is taking actions
    towards a goal.
    end note

    package "DoNothing" #DDDDDD
    {
      class DoNothing <<StepBehaviourControllerSO>>
      StepBehaviourControllerSO -[hidden]-> DoNothing
      
      class Nothing <<ActionState>>
      DoNothing --> Nothing : No condition
    }

    package "TryToAttackNearestEnemy Action Example" #DDDDDD
    {
      class TryToAttackNearestEnemy <<StepBehaviourControllerSO>>
      Nothing -[hidden]-> TryToAttackNearestEnemy

      class FindEnemyTarget <<ActionState>>
      class SelectSkillToAttackWith <<ActionState>>
      class MoveToAttackWithSkill <<ActionState>>
      class AttackTargetWithSkill <<ActionState>>

      note "If no enemy target" as N1
      note "If no skill selected" as N2
      note "If not in position to attack" as N3
      note "If skill is not on cooldown" as N4

      TryToAttackNearestEnemy --> N1
      TryToAttackNearestEnemy --> N2
      TryToAttackNearestEnemy --> N3
      TryToAttackNearestEnemy --> N4

      N1 --> FindEnemyTarget
      N2 --> SelectSkillToAttackWith
      N3 --> MoveToAttackWithSkill
      N4 --> AttackTargetWithSkill
    }
    package "TryToFollowPlayerInFormation Action Example" #DDDDDD
    {
      class TryToFollowPlayerInFormation <<StepBehaviourControllerSO>>
      MoveToAttackWithSkill -[hidden]-> TryToFollowPlayerInFormation

      class FindPlayer <<ActionState>>
      class FindCorrectPositionInFormation <<ActionState>>
      class MoveToCorrectPositionInFormation <<ActionState>>

      note "If player is not known" as N5
      note "If correct position is not known" as N6
      note "If currently not following player\nin correct position in formation" as N7

      TryToFollowPlayerInFormation --> N5
      TryToFollowPlayerInFormation --> N6
      TryToFollowPlayerInFormation --> N7

      N5 --> FindPlayer
      N6 --> FindCorrectPositionInFormation
      N7 --> MoveToCorrectPositionInFormation
    }
  }
}
@enduml